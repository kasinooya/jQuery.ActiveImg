$('body').append("<style type=\"text\/css\">.AIframe{position:relative;overflow:hidden}.AIimageList{position:relative;border:1px solid #333}.AIimageList img{display:none;position:absolute;top:0;left:0;border:0}.AInavBg{position:absolute;bottom:0;z-index:1;width:100%;height:24px;background-color:#000;opacity:.5;filter:alpha(opacity=50)}.AInav{position:relative}.AInav ul,.AInav li{border:0;margin:0;padding:0;list-style:none}ul.AInavTitle{overflow:hidden;height:24px;padding-left:1%}.AInavTitle li{display:none;height:24px;font-size:12px;font-family:\'微软雅黑\',\'黑体\',tahoma;line-height:24px;letter-spacing:1px}.AInavTitle li.active{display:block}ul.AInavbar{position:absolute;right:0;bottom:0;height:16px;margin:0;padding:4px 0}.AInavbar li{float:left;width:14px;height:14px;margin-right:3px;border-top:2px solid #CCC;border-right:2px solid #CCC;background:#a5a5a5;_font-size:0}.AInavbar li.active{background:#0084ff}.AInav-inner{position:absolute;bottom:0;left:0;right:0;z-index:9;width:100%}.AInav-inner a{color:#FFF;text-decoration:none}.AInav-inner .AInavbar li{width:4px;height:4px;margin-top:2px;border:2px solid #a5a5a5}.AInav-inner .AInavbar li.active{width:8px;height:8px;margin-top:0;border:2px solid #a5a5a5}.hide{display:none}}<\/style>");
function ActiveImg(c,b){this.options=$.extend({},this.defaults,b);this.error=[];this._animeFlag;var a=$(c);a.html("");$("<div>").addClass("AIimageList").prependTo(a);$("<div>").addClass("AInav").appendTo(a);this._nav=a.find(".AInav");$("<ul>").addClass("AInavTitle").prependTo(this._nav);$("<ul>").addClass("AInavbar").appendTo(this._nav);if(this.options.style==="inner"){this._nav.addClass("AInav-inner");$("<div>").addClass("AInavBg").appendTo(a)}this._title=a.find(".AInavTitle");this._list=a.find(".AIimageList");this._navbar=a.find(".AInavbar")}ActiveImg.prototype={defaults:{width:160,height:160,style:"normal",anime:"fade",time:3000,recount:true,titleSize:20},active_anime_change:function(b,e){var a=this.options.anime;var c=this._list.find(".active");if(b!=c.parent().index()){c.stop(true).removeClass("active");if(a==="slide"){c.slideUp(e)}else{c.fadeOut(e)}this._navbar.find(".active").removeClass("active");this._title.find(".active").removeClass("active");this._navbar.find("li:eq("+b+")").addClass("active");this._title.find("li:eq("+b+")").addClass("active");var d=this._list.find("img:eq("+b+")");d.addClass("active");if(a==="slide"){d.slideDown(e)}else{if(e==="fast"){d.fadeIn()}else{d.fadeIn(e)}}}},active_next:function(){var a=this._list.find(".active").parent().index();a=(a+1)%this._list.find("a").length;this.active_anime_change(a,"slow")},setAnime:function(a){switch(a){case"fade":this.active_fade();break;case"slide":this.active_slide();break;default:this.error.push("setAnime anime error");return this}this.options.anime=a;return this},setData:function(d){this._list.html("");this._navbar.html("");for(var a in d){var c='<a href="'+d[a].link+'" target="_blank">';c+='<img src="'+d[a].url+'" alt="'+d[a].alt+'"></a>';this._list.append(c);this._navbar.append("<li>");var b=d[a].alt;if(b.length>this.options.titleSize){b=b.substr(0,this.options.titleSize)+"..."}c='<a href="'+d[a].link+'" title="'+d[a].alt+'" target="_blank">';c+="<li>"+b+"</li></a>";this._title.append(c)}this.setShape(this.options.width,this.options.height);return this},setShape:function(e,a){if(isNaN(a)){this.error.push("setShape height error");return this}else{if(isNaN(e)){var c=e.length-1;if((e.indexOf("%")===c)&&!isNaN(e.substr(0,c))){this._list.parent().width(e);this._list.find("img").each(function(){$(this).width("100%").height(a)})}else{this.error.push("setShape width error");return this}}else{this._list.parent().width(parseInt(e)+2);this._list.find("img").each(function(){$(this).width(e).height(a)})}}this._list.height(a);var d=this._list.parent().width();var b=(d-this._navbar.width()-30)/d*100;this._title.width(b+"%");this.options.width=e;this.options.height=a;return this},start:function(){this._list.find("img.active").removeClass("active");this._list.find("img:first").addClass("active").show();this._navbar.find("li.active").removeClass("active");this._navbar.find("li:first").addClass("active");this._title.find("li.active").removeClass("active");this._title.find("li:first").addClass("active");var a=this;this._animeFlag=setInterval(function(){a.active_next()},this.options.time);this._navbar.off("mouseover","li");this._navbar.on("mouseover","li",function(){if(a.options.recount){clearInterval(a._animeFlag)}a.active_anime_change($(this).index(),"fast");if(a.options.recount){a._animeFlag=setInterval(function(){a.active_next()},a.options.time)}})},stop:function(){clearInterval(this._animeFlag);return this}};